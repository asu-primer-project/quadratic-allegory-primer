<?xml version="1.0"?>

<StoryWorld name="Walk World" userEntity="Robo12">

	<!-- Entities -->
	<!-- Robots -->
	<Entity name="Robo12">
		<Attribute name="Robot"/>
		<Relationship name ="At" object="Room A" />			
	</Entity>

	<Entity name="Robo44">
		<Attribute name="Robot"/>
		<Relationship name ="At" object="Room C" />
		<Obligation name="Move from back to middle" verb="Walk" var1="Room C" var2="Room B" />
		<Obligation name="Move middle to front" verb="Walk" var1="Room B" var2="Room A" />		
	</Entity>
	
	<Entity name="Robo39">
		<Attribute name="Robot"/>
		<Relationship name ="At" object="Room B" />
		<Behavior name="Room Search" verb="Walk" chance="2" />
		<Behavior name="Wait" verb="Wait" chance="1" />				
	</Entity>

	<Entity name="Robo81">
		<Attribute name="Robot"/>
		<Relationship name ="At" object="Room B" />
		<Goal name="Go to room A" subject="Robo81" type="add">
				<Relationship name="At" object="Room A" />
		</Goal>
		<Behavior name="Room Search" verb="Walk" chance="2"/>
		<Behavior name="Wait" verb="Wait" chance="1"/>			
	</Entity>

	<!-- Rooms -->
	<Entity name="Room A">
		<Attribute name="Location"/>
		<Relationship name ="Connected To" object="Room B" />
	</Entity>
	
	<Entity name="Room B">
		<Attribute name="Location"/>
		<Relationship name ="Connected To" object="Room A" />
		<Relationship name ="Connected To" object="Room C" />
		<Relationship name ="Connected To" object="Room F" />				
	</Entity>	
	
	<Entity name="Room C">
		<Attribute name="Location"/>
		<Relationship name ="Connected To" object="Room B" />		
	</Entity>	
	
	<Entity name="Room D">
		<Attribute name="Location"/>
		<Relationship name ="Connected To" object="Room B" />		
	</Entity>	
	
	<Entity name="Room E">
		<Attribute name="Location"/>
		<Relationship name ="Connected To" object="Room B" />
		<Relationship name ="Connected To" object="Room F" />		
	</Entity>
	
	<Entity name="Room F">
		<Attribute name="Location"/>
		<Relationship name ="Connected To" object="Room E" />
		<Relationship name ="Connected To" object="Room B" />		
	</Entity>
	
	<!-- Verbs -->
	<Verb name="Walk">
		<Variable name="?fromLocation" />
		<Variable name="?toLocation" />

		<In text="Walk to" />
		<In text="?toLocation" />
		<In text="from" />
		<In text="?fromLocation" />
		
		<Out text="?me" />
		<Out text="walks to" />
		<Out text="?toLocation" />

		<Condition name="From location is location" subject="?fromLocation" negate="false">
			<Attribute name="Location" />
		</Condition>
		<Condition name="To location is location" subject="?toLocation" negate="false">
			<Attribute name="Location" />
		</Condition>
		<Condition name="Me in from location" subject="?me" negate="false">
			<Relationship name="At" object="?fromLocation" />
		</Condition>
		<Condition name="Path leading from location to location" subject="?fromLocation" negate="false">
			<Relationship name="Connected To" object="?toLocation" />
		</Condition>
		
		<Operator name="Exit from location" subject="?me" type="remove">
			<Relationship name="At" object="?fromLocation" />
		</Operator>
		<Operator name="Enter to location" subject="?me" type="add">
			<Relationship name="At" object="?toLocation" />
		</Operator>
	</Verb>

</StoryWorld>